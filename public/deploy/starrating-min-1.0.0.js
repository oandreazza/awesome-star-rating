!function(n){var t,a;n.fn.rating=function(i){return this.each(function(){var e=n.extend({length:5,identifier:null,ratingValue:0},i);t=e.identifier,a=e.length;var r=createContainer();n(r).append(createOptions()),fillOptions(e.ratingValue,n(r)),this.append(r)})},createOptions=function(){for(var i=[],e=a,r=0;r<a;r++){var o=document.createElement("span");n(o).addClass("rating-option").attr("data-rating",e).on("click",{ratingValue:e,identifier:t},rate),i.push(n(o)),e--}return i},createContainer=function(){var n=document.createElement("div");return n.className="rating-container",n},rate=function(t){var a=n(this).parents(".rating-container");n(this).trigger("rating:rate",[t.data.ratingValue,t.data.identifier,function(){fillOptions(t.data.ratingValue,a)}])},clearOptions=function(n){n.find(".rating-option").removeClass("filled")},fillOptions=function(n,t){var a=t.find(".filled").length;if(clearOptions(t),n!==a)for(var i=1;i<=n;i++)t.find('.rating-option[data-rating="'+i+'"]').addClass("filled")}}(jQuery);